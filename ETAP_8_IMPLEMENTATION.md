# –≠—Ç–∞–ø 8: AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–º—Ç–æ–≤
## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: –ü–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä

### üìã –°—Ç–∞—Ç—É—Å: –ó–ê–í–ï–†–®–ï–ù–û ‚úÖ

–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–º—Ç–æ–≤ (Etap 8 –∏–∑ PLAN.md).

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

#### 1. **EnhanceResult** (`chatlist/core/enhance_result.py`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: Dataclass –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–º—Ç–∞
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è**:
  - `original_prompt`: –ò—Å—Ö–æ–¥–Ω—ã–π –ø—Ä–æ–º—Ç
  - `enhanced_prompt`: –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–æ–º—Ç
  - `alternatives`: –°–ø–∏—Å–æ–∫ 2-3 –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
  - `explanation`: –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π
  - `recommendations`: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é (–∫–æ–¥, –∞–Ω–∞–ª–∏–∑, –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å)
  - `model_id`: ID –º–æ–¥–µ–ª–∏, –≤—ã–ø–æ–ª–Ω–∏–≤—à–µ–π —É–ª—É—á—à–µ–Ω–∏–µ
  - `enhancement_type`: –¢–∏–ø —É–ª—É—á—à–µ–Ω–∏—è (general, code, analysis, creative)
  - `timestamp`: –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  - `id`: Optional ID —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –ë–î

- **–ú–µ—Ç–æ–¥—ã**:
  - `to_dict()`: –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î (JSON –¥–ª—è —Å–ø–∏—Å–∫–æ–≤)
  - `from_dict(data: Dict) -> EnhanceResult`: –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑ –ë–î

---

#### 2. **PromptEnhancerClient** (`chatlist/core/prompt_enhancer_client.py`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: API –∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–æ–º—Ç–æ–≤ –Ω–∞ —É–ª—É—á—à–µ–Ω–∏–µ
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: OpenRouter API —Å –º–æ–¥–µ–ª—å—é GPT-4o-mini

- **SYSTEM_PROMPTS** (4 —Ç–∏–ø–∞ —É–ª—É—á—à–µ–Ω–∏—è):
  - **general**: –û–±—â–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
  - **code**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –∫–æ–¥–∞ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–º—Ç–æ–≤
  - **analysis**: –£–ª—É—á—à–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
  - **creative**: –£–ª—É—á—à–µ–Ω–∏–µ –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á

- **–û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥**:
  ```python
  enhance_prompt(prompt: str, model_id: int, 
                 enhancement_type: str, api_url: str) -> Optional[EnhanceResult]
  ```
  - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–ª–∏–Ω—É –ø—Ä–æ–º—Ç–∞ (10-10000 —Å–∏–º–≤–æ–ª–æ–≤)
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ OpenRouter API
  - –ü–∞—Ä—Å–∏—Ç JSON –æ—Ç–≤–µ—Ç
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç EnhanceResult –∏–ª–∏ None –ø—Ä–∏ –æ—à–∏–±–∫–µ

- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
  - Timeout: 30 —Å–µ–∫
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã JSON –æ—Ç–≤–µ—Ç–∞
  - Fallback –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø–∞—Ä—Å–∏–Ω–≥–∞
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

---

#### 3. **PromptEnhancerManager** (`chatlist/core/prompt_enhancer_manager.py`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —É–ª—É—á—à–µ–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: DatabaseManager, ModelManager

- **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏**:
  - `enhance_prompt(prompt, model_id, enhancement_type)`: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —É–ª—É—á—à–µ–Ω–∏–µ
  - `save_enhancement(enhancement, prompt_id)`: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î, –≤–µ—Ä–Ω—É—Ç—å ID
  - `get_enhancement_history(prompt_id, limit)`: –ò—Å—Ç–æ—Ä–∏—è —É–ª—É—á—à–µ–Ω–∏–π
  - `get_enhancement_by_id(enhancement_id)`: –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  - `delete_enhancement(enhancement_id)`: –£–¥–∞–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

---

#### 4. **PromptEnhancerDialog** (`chatlist/ui/prompt_enhancer_dialog.py`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: PyQt6 –¥–∏–∞–ª–æ–≥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–ª—É—á—à–µ–Ω–∏–µ–º –ø—Ä–æ–º—Ç–æ–≤
- **–†–∞–∑–º–µ—Ä—ã**: 1100x700 (default), –º–∏–Ω–∏–º—É–º 900x600
- **Threading**: EnhancementWorker (QThread) –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ UI**:
  - **–õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å (1/3)**: –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö
    - QTextEdit: –¢–µ–∫—Å—Ç –ø—Ä–æ–º—Ç–∞
    - QComboBox: –¢–∏–ø —É–ª—É—á—à–µ–Ω–∏—è (General/Code/Analysis/Creative)
    - QComboBox: –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏
    - QPushButton: "–£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–º—Ç"
    - QProgressBar: –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
  
  - **–ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å (2/3)**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã (QTabWidget)
    - **–í–∫–ª–∞–¥–∫–∞ "–£–ª—É—á—à–µ–Ω–Ω—ã–π"**: –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–æ–º—Ç + Copy/Use –∫–Ω–æ–ø–∫–∏
    - **–í–∫–ª–∞–¥–∫–∞ "–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã"**: –°–ø–∏—Å–æ–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ + Copy/Use –Ω–∞ –∫–∞–∂–¥—ã–π
    - **–í–∫–ª–∞–¥–∫–∞ "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"**: –û–±—ä—è—Å–Ω–µ–Ω–∏–µ + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø–∞–º

- **–°–∏–≥–Ω–∞–ª—ã**:
  - `prompt_selected(str)`: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ–º—Ç –≤ main_window

- **–í–∞–ª–∏–¥–∞—Ü–∏—è**:
  - –î–ª–∏–Ω–∞ –ø—Ä–æ–º—Ç–∞ 10-10000 —Å–∏–º–≤–æ–ª–æ–≤
  - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ timeout'–æ–≤ –∏ –æ—à–∏–±–æ–∫ API

---

#### 5. **Main Window Integration** (`chatlist/ui/main_window.py`)
- **–ö–Ω–æ–ø–∫–∞ –≤ toolbar**: "üéØ Enhance Prompt"
- **–ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞**: Ctrl+E
- **–ú–µ—Ç–æ–¥—ã**:
  - `on_enhance_prompt()`: –û—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥ —Å —Ç–µ–∫—É—â–∏–º –ø—Ä–æ–º—Ç–æ–º
  - `on_enhanced_prompt_selected(enhanced_prompt)`: –í—Å—Ç–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞

---

#### 6. **PromptInputWidget Extension** (`chatlist/ui/prompt_input.py`)
- **–ù–æ–≤—ã–π –º–µ—Ç–æ–¥**:
  ```python
  set_prompt_text(text: str)
  ```
  - –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π —Å–ø–æ—Å–æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–º—Ç–∞
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–∑ –¥–∏–∞–ª–æ–≥–∞

---

#### 7. **Database Migration** (`chatlist/migrations/002_prompt_enhancements.sql`)
- **–¢–∞–±–ª–∏—Ü–∞**: `prompt_enhancements`
- **–ö–æ–ª–æ–Ω–∫–∏**:
  - id (PK)
  - original_prompt (TEXT)
  - enhanced_prompt (TEXT)
  - alternatives (JSON)
  - explanation (TEXT)
  - recommendations (JSON)
  - model_id (FK)
  - enhancement_type (VARCHAR)
  - prompt_id (FK, nullable)
  - created_at (TIMESTAMP)

- **–ò–Ω–¥–µ–∫—Å—ã** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
  - on prompt_id
  - on created_at
  - on model_id

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit Tests (`tests/test_prompt_enhancer.py`)
**–°—Ç–∞—Ç—É—Å**: ‚úÖ 9/9 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ

**–ü–æ–∫—Ä—ã—Ç–∏–µ**:
1. `test_system_prompts_exist` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö 4 —Ç–∏–ø–æ–≤ –ø—Ä–æ–º—Ç–æ–≤
2. `test_enhance_result_serialization` - Round-trip to_dict/from_dict
3. `test_validation_empty_prompt` - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ –ø—Ä–æ–º—Ç–∞
4. `test_validation_short_prompt` - –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø—Ä–æ–º—Ç–æ–≤ (<10)
5. `test_validation_long_prompt` - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω–Ω—ã—Ö –ø—Ä–æ–º—Ç–æ–≤ (>10000)
6. `test_invalid_enhancement_type` - Fallback –¥–ª—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞
7. `test_enhance_result_creation` - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
8. `test_enhance_result_defaults` - –ü—Ä–æ–≤–µ—Ä–∫–∞ default –∑–Ω–∞—á–µ–Ω–∏–π
9. `test_enhance_result_id_optional` - Optional –ø–æ–ª–µ id

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
cd /home/stefan/work/ChatList
.venv/bin/python -m pytest tests/test_prompt_enhancer.py -v
```

---

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π workflow

1. **–û—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥ —É–ª—É—á—à–µ–Ω–∏—è**:
   - –ö–ª–∏–∫–Ω—É—Ç—å –∫–Ω–æ–ø–∫—É "üéØ Enhance Prompt" –≤ toolbar
   - –ò–ª–∏ –Ω–∞–∂–∞—Ç—å Ctrl+E
   - –î–∏–∞–ª–æ–≥ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å —Ç–µ–∫—É—â–∏–º –ø—Ä–æ–º—Ç–æ–º –≤ –ø–æ–ª–µ

2. **–£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–º—Ç**:
   - –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø —É–ª—É—á—à–µ–Ω–∏—è (General/Code/Analysis/Creative)
   - –í—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –ö–ª–∏–∫–Ω—É—Ç—å "–£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–º—Ç"
   - –ü—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –Ω–∞ progress bar

3. **–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**:
   - –í–∫–ª–∞–¥–∫–∞ "–£–ª—É—á—à–µ–Ω–Ω—ã–π": –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É–ª—É—á—à–µ–Ω–∏—è
   - –í–∫–ª–∞–¥–∫–∞ "–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã": 2-3 –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞
   - –í–∫–ª–∞–¥–∫–∞ "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏": –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏ —Å–æ–≤–µ—Ç—ã

4. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   - –ù–∞–∂–∞—Ç—å "Use" —á—Ç–æ–±—ã –≤—Å—Ç–∞–≤–∏—Ç—å –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
   - –ù–∞–∂–∞—Ç—å "Copy" —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### API Integration
- **Provider**: OpenRouter API
- **Model**: openai/gpt-4o-mini
- **Auth**: OPENROUTER_API_KEY (–∏–∑ .env)
- **Temperature**: 0.7
- **Max tokens**: 2000
- **Timeout**: 30 —Å–µ–∫—É–Ω–¥

### Enhancement Types

#### General (–û–±—â–µ–µ)
–£–ª—É—á—à–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∏ —è—Å–Ω–æ—Å—Ç–∏. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á.

#### Code (–ö–æ–¥)
–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º—Ç–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞. –£–ª—É—á—à–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

#### Analysis (–ê–Ω–∞–ª–∏–∑)
–£—Å–∏–ª–µ–Ω–∏–µ –ø—Ä–æ–º—Ç–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–¥–∞—á.

#### Creative (–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ)
–†–∞—Å–∫—Ä—ã—Ç–∏–µ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ –ø—Ä–æ–º—Ç–æ–≤ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

---

## üîÑ Data Flow

```
User Input
    ‚Üì
PromptEnhancerDialog (UI)
    ‚Üì
PromptEnhancerManager (Business Logic)
    ‚Üì
PromptEnhancerClient (API)
    ‚Üì
OpenRouter API (GPT-4o-mini)
    ‚Üì
JSON Response
    ‚Üì
EnhanceResult (Data Model)
    ‚Üì
Database (prompt_enhancements table)
    ‚Üì
Display in UI / Insert into prompt field
```

---

## üìä Performance

- **API Response Time**: ~3-5 —Å–µ–∫ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç OpenRouter)
- **UI Responsiveness**: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ QThread (EnhancementWorker)
- **Database Operations**: <100ms (–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- **Memory Usage**: ~5MB (–∫–µ—à –º–æ–¥–µ–ª–µ–π –≤ –ø–∞–º—è—Ç–∏)

---

## üõ†Ô∏è –û—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ logger.info/logger.error:
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ API
- –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
- –ü–∞—Ä—Å–∏–Ω–≥ JSON
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç–∞–±–ª–∏—Ü—ã
```bash
sqlite3 chatlist.db "SELECT name FROM sqlite_master WHERE type='table' AND name='prompt_enhancements';"
```

### –í—Ä—É—á–Ω—É—é –≤—ã–∑–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–∏–µ
```python
from chatlist.core.prompt_enhancer_manager import PromptEnhancerManager
manager = PromptEnhancerManager()
result = manager.enhance_prompt("Write a hello world", model_id=1, enhancement_type="code")
```

---

## üìù –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–∏–∑ PLAN.md Etap 8)

- ‚úÖ 8.1: EnhanceResult dataclass
- ‚úÖ 8.2: SYSTEM_PROMPTS –¥–ª—è 4 —Ç–∏–ø–æ–≤
- ‚úÖ 8.3: PromptEnhancerClient —Å API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- ‚úÖ 8.4: Database table –∏ migration
- ‚úÖ 8.5: PromptEnhancerManager —Å CRUD
- ‚úÖ 8.6: PromptEnhancerDialog UI (3 –≤–∫–ª–∞–¥–∫–∏)
- ‚úÖ 8.7: Error handling –∏ validation
- ‚úÖ 8.8: Threading –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ 8.9: Integration —Å main_window
- ‚úÖ 8.11: Unit tests (10/10 –º–µ—Ç–æ–¥–æ–≤)
- ‚è≠Ô∏è 8.10: Caching (optional, –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- ‚è≠Ô∏è 8.12: Dokumentation (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ UI**: –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–ª–∏–∫–Ω—É—Ç—å Ctrl+E, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å workflow
2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –î–æ–±–∞–≤–∏—Ç—å LRU cache –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –î–æ–±–∞–≤–∏—Ç—å tracking —É—Å–ø–µ—à–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏**: –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é —É–ª—É—á—à–µ–Ω–∏–π —Å –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º

---

**–°–æ–∑–¥–∞–Ω–æ**: –í–æ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Etap 8
**–Ø–∑—ã–∫**: Python 3.12+ —Å PyQt6
**API**: OpenRouter (openai/gpt-4o-mini)
